"use strict";var app=new Vue({el:"#app",data:{isLoading:!0,type:"months",currentMonth:0,editedProject:{},editedVolunteer:{},months:[{}],volunteers:[{}]},methods:{getFullAddress:function b(a){return"".concat(a.address,", ").concat(a.city,", ").concat(a.locality,", ").concat(a.country,", ").concat(a.postal)},newVolunteer:function a(){this.editedVolunteer={name:"",address:"",city:"",locality:"",country:"",postal:""}},deleteVolunteer:function b(){var a=this;removeVolunteer(this.editedVolunteer.volunteerID,function(){a.volunteers=a.volunteers.filter(function(b){return b.volunteerID!=a.editedVolunteer.volunteerID})})},editVolunteer:function b(a){this.editedVolunteer=JSON.parse(JSON.stringify(this.volunteers.filter(function(b){return b.volunteerID==a})[0]||{}))},saveVolunteer:function b(){var a=this;if(this.editedVolunteer.volunteerID){var c=this.volunteers.filter(function(b){return b.volunteerID!=a.editedVolunteer.volunteerID});c.push(JSON.parse(JSON.stringify(this.editedVolunteer))),sendVolunteer(this.editedVolunteer,function(){a.editedVolunteer={},a.months[a.currentMonth].projects=c.sort(sortProjects)})}else sendVolunteer(this.editedVolunteer,function(b){var c=a.volunteers;a.editedVolunteer.volunteerID=b.volunteerID,c.push(a.editedVolunteer),a.editedVolunteer={},a.volunteers=c.sort(sortProjects)})},newProject:function a(){this.editedProject={country:"",manager:"",type:"",cost:0,endsOnCurrentMonth:!1}},deleteProject:function b(){var a=this;removeProject(this.editedProject.projectID,function(){a.months[a.currentMonth].projects=a.months[a.currentMonth].projects.filter(function(b){return b.projectID!=a.editedProject.projectID}),a.editedProject={}})},editProject:function b(a){this.editedProject=JSON.parse(JSON.stringify(this.months[this.currentMonth].projects.filter(function(b){return b.projectID==a})[0]||{}))},saveProject:function b(){var a=this;if(this.editedProject.projectID){var c=this.months[this.currentMonth].projects.filter(function(b){return b.projectID!=a.editedProject.projectID});c.push(JSON.parse(JSON.stringify(this.editedProject))),sendProject(this.editedProject,function(){a.editedProject={},a.months[a.currentMonth].projects=c.sort(sortProjects)})}else sendProject(this.editedProject,function(b){var c=a.months[a.currentMonth].projects;a.editedProject.projectID=b.projectID,c.push(a.editedProject),a.editedProject={},a.months[a.currentMonth].projects=c.sort(sortProjects)})}},computed:{getRoofOfChart:function a(){return(this.months[this.currentMonth].projects||[]).map(function(a){return a.cost}).sort(function(c,a){return a-c})[0]},getChartY:function a(){return[0,0,0,0,0].fill(this.getRoofOfChart,0,4).map(function(a,b){return(a/(b+1)/1e3).toFixed(2)+"k"})}}}),removeVolunteer=function(a,b){return post("/api/data/remove/volunteer",a).then(b)},removeProject=function(a,b){return post("/api/data/remove/project",{projectID:a}).then(b)},sendProject=function(a,b){return post("/api/data/edit/project",a).then(b)},sendVolunteer=function(a,b){return post("/api/data/edit/volunteer",a).then(b)},sortProjects=function(c,a){return c.country==a.country?c.type>a.type?1:-1:c.country>a.country?1:-1},toCurrency=function(a){return parseFloat(a).toLocaleString(void 0,{style:"currency",currency:"USD"})},changeType=function(a){Vue.set(app,"editedProject",{}),Vue.set(app,"type",a),loadData(a)},setMonth=function(a){Vue.set(app,"editedProject",{}),Vue.set(app,"currentMonth",a)},loadData=function(a){Vue.set(app,"isLoading",!0),get("/api/data/".concat(a)).then(function(b){"months"==a&&(b=b.map(function(a){var b=(a.projects||[]).sort(sortProjects);return a.projects=b,a})),Vue.set(app,a,b),Vue.set(app,"isLoading",!1)})},post=function(a,b){return new Promise(function(c,d){var e=new XMLHttpRequest;e.onload=function(){var a=JSON.parse(e.response);a.error?d(a):c(a)},e.open("POST",a),e.setRequestHeader("Content-Type","application/json;charset=UTF-8"),e.send(JSON.stringify(b))})},get=function(a){return new Promise(function(b,c){var d=new XMLHttpRequest;d.onload=function(){var a=JSON.parse(d.response);a.error?c(a):b(a)},d.open("GET",a),d.setRequestHeader("Content-Type","application/json;charset=UTF-8"),d.send()})};window.addEventListener("load",function(){loadData("months")});
//# sourceMappingURL=application.js.map